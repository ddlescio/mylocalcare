{% extends "layout_admin.html" %}
{% set body_class = "offset-navbar" %}

{% block admin_content %}
<div class="max-w-xl mx-auto">

  <div class="bg-white border border-slate-200 rounded-2xl shadow-sm p-6">

    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl font-bold text-slate-900">
          {% if piano %}‚úèÔ∏è Modifica piano{% else %}‚ûï Nuovo piano{% endif %}
        </h1>
        <p class="text-slate-600 text-sm mt-1">
          Servizio: <b>{{ servizio.nome }}</b>
        </p>
      </div>

      <a href="{{ url_for('admin_servizi_piani', servizio_id=servizio.id) }}"
         class="px-4 py-2 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200">
        ‚Üê Indietro
      </a>
    </div>

    <form method="POST" class="space-y-4">

      <div>
        <label class="text-sm font-semibold text-slate-700">Codice piano</label>
        <input name="codice" required
               value="{{ piano.codice if piano else '' }}"
               class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300">
        <p class="text-xs text-slate-500 mt-1">
          Unico per questo servizio (es: base / medio / premium)
        </p>
      </div>

      <div>
        <label class="text-sm font-semibold text-slate-700">Nome visibile</label>
        <input name="nome" required
               value="{{ piano.nome if piano else '' }}"
               class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300">
      </div>

      <div>
        <label class="text-sm font-semibold text-slate-700">Descrizione</label>
        <textarea name="descrizione" rows="2"
                  class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300">{{ piano.descrizione if piano else '' }}</textarea>
      </div>


        <div>
          <label class="text-sm font-semibold text-slate-700">Durata (giorni)</label>
          <input
            name="durata_giorni"
            type="number"
            min="1"
            id="durata_giorni"
            value="{{ piano.durata_giorni if piano and piano.durata_giorni is not none else '' }}"
            class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300"
          >

          <label class="mt-2 flex items-center gap-2 text-sm text-slate-600">
            <input type="checkbox" name="permanente" id="permanente"
                   {% if piano and piano.durata_giorni is none %}checked{% endif %}>
            ‚ôæÔ∏è Senza scadenza (permanente)
          </label>
        </div>

        <div>
          <label class="text-sm font-semibold text-slate-700">Prezzo (‚Ç¨)</label>
          <input name="prezzo_euro"
                 type="number"
                 step="0.01"
                 min="0"
                 required
                 value="{{ (piano.prezzo_cent / 100) if piano else '' }}"
                 class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300">
        </div>
      </div>

      <div>
        <label class="text-sm font-semibold text-slate-700">Ordine</label>
        <input name="ordine" type="number"
               value="{{ piano.ordine if piano else 1 }}"
               class="mt-1 w-full px-3 py-2 rounded-xl border border-slate-300">
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
        <label class="flex items-center gap-2 p-3 border rounded-xl">
          <input type="checkbox" name="evidenziato" value="1"
                 {% if piano and piano.evidenziato %}checked{% endif %}>
          üçø Evidenziato
        </label>

        <label class="flex items-center gap-2 p-3 border rounded-xl">
          <input type="checkbox" name="consigliato" value="1"
                 {% if piano and piano.consigliato %}checked{% endif %}>
          ‚≠ê Consigliato
        </label>

        <label class="flex items-center gap-2 p-3 border rounded-xl">
          <input type="checkbox" name="attivo" value="1"
                 {% if piano is none or piano.attivo %}checked{% endif %}>
          Attivo
        </label>
      </div>

      <div class="pt-4 flex gap-2">
        <button type="submit"
                class="px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700">
          Salva
        </button>

        <a href="{{ url_for('admin_servizi_piani', servizio_id=servizio.id) }}"
           class="px-4 py-2 rounded-xl bg-slate-100 text-slate-700 hover:bg-slate-200">
          Annulla
        </a>
      </div>

    </form>
  </div>

</div>
{% endblock %}
